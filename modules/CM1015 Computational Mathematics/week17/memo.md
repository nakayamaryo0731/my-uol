# Week 17: Vectors and Matrices - 総合まとめ

## 1. 行列式（Determinant）

### 2×2 行列の行列式
```
| a  b |
| c  d |  →  det = ad - bc
```

**例：**
```
| 5   2 |
| -1  3 |  →  det = (5)(3) - (2)(-1) = 15 + 2 = 17
```

### 行列式の意味

| det(A) | 意味 |
|--------|------|
| \|det\| > 1 | 面積が拡大 |
| \|det\| < 1 | 面積が縮小 |
| \|det\| = 1 | 面積が保存（回転など） |
| det < 0 | 向きが反転（反射を含む） |
| det = 0 | 潰れる（逆変換不可） |

---

## 2. 逆行列（Inverse Matrix）

### 2×2 行列の逆行列公式
```
        1      |  d  -b |
A⁻¹ = ----- ×  | -c   a |
      ad-bc
```

条件：ad - bc ≠ 0（行列式がゼロでない）

**例：** A = [2 3; 1 4] の逆行列
```
det(A) = (2)(4) - (3)(1) = 8 - 3 = 5

         1   |  4  -3 |   | 4/5   -3/5 |
A⁻¹ =  --- × | -1   2 | = | -1/5   2/5 |
         5
```

---

## 3. Enlargement（拡大・縮小）

### 基本形
```
| k  0 |
| 0  k |
```

- k > 1: 拡大
- 0 < k < 1: 縮小
- k < 0: 拡大/縮小 + 反転

### x軸とy軸で異なるスケール
```
| kx  0  |
| 0   ky |
```

**例：** 三角形 (0,0), (1,0), (0,1) に [2 0; 0 3] を適用

| 元の頂点 | 変換後 |
|----------|--------|
| (0, 0) | (0, 0) |
| (1, 0) | (2, 0) |
| (0, 1) | (0, 3) |

---

## 4. Reflection（反射・鏡映）

### 主要な反射行列

| 反射軸 | 行列 | 効果 |
|--------|------|------|
| x軸 | `[1, 0; 0, -1]` | y座標が反転（上下反転） |
| y軸 | `[-1, 0; 0, 1]` | x座標が反転（左右反転） |
| 原点 | `[-1, 0; 0, -1]` | 点対称 |
| y = x | `[0, 1; 1, 0]` | x と y を入れ替え |
| y = -x | `[0, -1; -1, 0]` | x と y を入れ替え + 符号反転 |

### 反射行列の一般公式

角度 θ の直線に関する反射：
```
| cos 2θ    sin 2θ  |
| sin 2θ   -cos 2θ  |
```

**例：** y = -x（θ = -45°）の場合
- 2θ = -90°
- cos(-90°) = 0, sin(-90°) = -1
```
|  0  -1 |
| -1   0 |
```

---

## 5. Rotation（回転）

### 原点を中心に角度 θ で反時計回りに回転
```
| cos(θ)  -sin(θ) |
| sin(θ)   cos(θ) |
```

### よく使う角度

| 角度 | 行列 | cos θ | sin θ |
|------|------|-------|-------|
| 90° | `[0, -1; 1, 0]` | 0 | 1 |
| 180° | `[-1, 0; 0, -1]` | -1 | 0 |
| 270° (-90°) | `[0, 1; -1, 0]` | 0 | -1 |

**例：** 90° 回転
```
| 0  -1 | | 1 |   | 0 |
| 1   0 | | 0 | = | 1 |

点(1,0) → 点(0,1)
```

---

## 6. Shearing（せん断）

### x方向のせん断
```
| 1  k |
| 0  1 |
```
効果：y座標に比例してx座標がずれる

### y方向のせん断
```
| 1  0 |
| k  1 |
```
効果：x座標に比例してy座標がずれる

**例：** x方向に k=2 のせん断
```
| 1  2 | | 1 |   | 3 |
| 0  1 | | 1 | = | 1 |

点(1,1) → 点(3,1)
```

図示：
```
Before:     After (k=1):
+--+        +--+
|  |   →   /  /
+--+      +--+
```

---

## 7. 変換の適用方法

点 (x, y) に行列 T を適用：
```
T × | x |
    | y |
```

**例：** 行列 [1 2; 0 1] を点 (1, 1) に適用
```
| 1  2 | | 1 |   | 1×1 + 2×1 |   | 3 |
| 0  1 | | 1 | = | 0×1 + 1×1 | = | 1 |

答え：(3, 1)
```

---

## 8. 変換の合成

複数の変換を組み合わせる場合、行列を**右から左へ**掛ける。

例：まず回転、次に拡大する場合
```
(拡大行列) × (回転行列) × (点)
```

---

## 9. クイック参照表

| やりたいこと | 行列 |
|-------------|------|
| x座標を反転 | `[-1, 0; 0, 1]` |
| y座標を反転 | `[1, 0; 0, -1]` |
| x,y入れ替え | `[0, 1; 1, 0]` |
| 90°回転 | `[0, -1; 1, 0]` |
| 180°回転 | `[-1, 0; 0, -1]` |
| k倍拡大 | `[k, 0; 0, k]` |
| 逆行列 | `(1/det)[d,-b;-c,a]` |
| 行列式 | `ad - bc` |

---

## 10. 練習問題と解答

### Q1: y = x に関する反射行列の効果は？
**A:** x と y 座標が入れ替わる（行列 [0 1; 1 0]）

### Q2: 180° 回転を表す行列は？
**A:** [-1 0; 0 -1]

### Q3: 行列 [2 3; 1 4] の逆行列は？
**A:** [4/5, -3/5; -1/5, 2/5]

### Q4: 行列 [5 2; -1 3] の行列式は？
**A:** 17

### Q5: 行列 [1 2; 0 1] を点 (1,1) に適用すると？
**A:** (3, 1)

### Q6: y = -x に関する反射行列は？
**A:** [0 -1; -1 0]

### Q7: 三角形 (0,0), (1,0), (0,1) に [2 0; 0 3] を適用すると？
**A:** (0, 0), (2, 0), (0, 3)
